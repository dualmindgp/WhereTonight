# âœ… UBICACIÃ“N ACTUALIZADA - Sistema de Puntos y QR

**Archivo modificado:** `src/components/ProfileScreenV2.tsx`

---

## ğŸ“± UBICACIÃ“N EXACTA en la Pantalla de Perfil

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Avatar] u8209214427                  â”‚
â”‚          [Editar]                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ 1       â”‚  â”‚ 1ğŸ”¥     â”‚            â”‚
â”‚  â”‚ Tickets â”‚  â”‚ Streak  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ 1       â”‚  â”‚ 1       â”‚            â”‚
â”‚  â”‚ Locales â”‚  â”‚ Amigos  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â­ AQUÃ ESTÃN AHORA â­                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â­ 0        â”‚  â”‚ ğŸ“ˆ 1        â”‚  â”‚  â† PUNTOS Y NIVEL
â”‚  â”‚ Puntos      â”‚  â”‚ Nivel       â”‚  â”‚  â† (cards amarillo/naranja)
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸ”³ Escanear CÃ³digo QR         â”‚ â”‚  â† BOTÃ“N QR
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â† (pÃºrpura/rosa)
â”‚                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ ğŸ“Œ        â”‚  â”‚ ğŸ•        â”‚      â”‚
â”‚  â”‚ Favoritos â”‚  â”‚ Historial â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                       â”‚
â”‚  âš™ï¸ Ajustes                           â”‚
â”‚  ğŸ”— Invitar amigos                    â”‚
â”‚  ğŸšª Cerrar sesiÃ³n                     â”‚
â”‚                                       â”‚
â”‚  ğŸ‘‘ WhereTonight PREMIUM              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ CÃ³mo Verlos AHORA

### Paso 1: Reiniciar el servidor
```bash
# Detener el servidor actual (Ctrl+C)
cd c:\Users\guill\Desktop\WhereTonight
npm run dev
```

### Paso 2: Refrescar navegador
- Abrir http://localhost:3000
- Presionar **Ctrl+R** o **F5** para refrescar
- Iniciar sesiÃ³n

### Paso 3: Ir a Perfil
- Click en la pestaÃ±a **"Perfil"** (ğŸ‘¤) abajo
- **Scroll hacia abajo** despuÃ©s de los cards de Amigos

### Paso 4: Â¡Verlos!
DeberÃ­as ver **EN ESTE ORDEN:**
1. âœ… Avatar y nombre
2. âœ… 4 cards: Tickets, Streak, Locales, Amigos
3. âœ… **2 CARDS NUEVAS:** â­ Puntos y ğŸ“ˆ Nivel (amarillo/naranja)
4. âœ… **BOTÃ“N NUEVO:** ğŸ”³ Escanear CÃ³digo QR (pÃºrpura)
5. âœ… Favoritos e Historial
6. âœ… MenÃº de opciones

---

## ğŸ§ª Probar Que Funcionan

### Probar Sistema de Puntos:

**1. Ver puntos iniciales:**
- Ir a Perfil
- Scroll hasta ver "â­ 0 Puntos"
- Verificar "ğŸ“ˆ 1 Nivel"

**2. Ganar puntos:**
- Ir al Mapa
- Abrir un local
- Click en **bookmark** (â­) para guardar
- VerÃ¡s: "Â¡Guardado en favoritos!" + "Â¡+5 puntos! â­"
- Volver a Perfil
- **Puntos = 5** âœ…

**3. Ganar mÃ¡s puntos:**
- Abrir otro local
- Click en **share** (ğŸ”—) para compartir
- VerÃ¡s: "Â¡+5 puntos! â­"
- Volver a Perfil
- **Puntos = 10** âœ…

### Probar QR Scanner:

**1. Abrir scanner:**
- Click en "ğŸ”³ Escanear CÃ³digo QR"
- Se abre pantalla negra
- Permitir acceso a cÃ¡mara

**2. Ver cÃ¡mara:**
- DeberÃ­as ver video de tu cÃ¡mara
- Marco azul sobre el video

**3. Probar:**
- Click en "ğŸ§ª Probar EscÃ¡ner (Demo)"
- VerÃ¡s toast: "CÃ³digo escaneado: WHERETONIGHT-123456789"

---

## ğŸ“‹ QuÃ© CambiÃ©

### Archivo: `src/components/ProfileScreenV2.tsx`

**Imports agregados:**
```typescript
import { Star, TrendingUp, QrCode } from 'lucide-react'
import QRScanner from './QRScanner'
import { getUserPoints, getLevelFromPoints } from '@/lib/points-system'
```

**Estados agregados:**
```typescript
const [showQRScanner, setShowQRScanner] = useState(false)
const [points, setPoints] = useState(0)
const [level, setLevel] = useState(1)
```

**En useEffect de stats (lÃ­neas 205-212):**
```typescript
// 6. Puntos y nivel
try {
  const totalPoints = await getUserPoints(user.id)
  setPoints(totalPoints)
  setLevel(getLevelFromPoints(totalPoints))
} catch (error) {
  console.error('Error loading points:', error)
}
```

**UI agregada (lÃ­neas 348-376):**
- Grid con cards de Puntos y Nivel
- BotÃ³n de QR Scanner

**Componente agregado (lÃ­neas 472-481):**
```typescript
<QRScanner
  isOpen={showQRScanner}
  onClose={() => setShowQRScanner(false)}
  onScan={(code) => {
    toast.success(`CÃ³digo escaneado: ${code}`)
    setShowQRScanner(false)
  }}
/>
```

---

## âœ… Checklist Final

Antes de probar:

- [ ] Servidor detenido y reiniciado
- [ ] Navegador refrescado (Ctrl+R)
- [ ] SesiÃ³n iniciada
- [ ] En la pestaÃ±a Perfil
- [ ] Hice scroll despuÃ©s de los cards de Amigos

DeberÃ­as ver:

- [ ] Card amarilla "â­ 0 Puntos"
- [ ] Card naranja "ğŸ“ˆ 1 Nivel"
- [ ] BotÃ³n pÃºrpura "ğŸ”³ Escanear CÃ³digo QR"

---

## ğŸ†˜ Si NO aparecen

1. **Verifica el archivo correcto:**
   ```bash
   # Debe decir "ProfileScreenV2.tsx"
   grep -r "ProfileScreenV2" src/app/page.tsx
   ```

2. **Verifica errores en consola:**
   - Presiona F12
   - PestaÃ±a "Console"
   - Copia cualquier error en rojo

3. **Verifica que guardaste:**
   - Todos los archivos sin â€¢ en el nombre
   - El servidor debe haber recargado automÃ¡ticamente

---

**Fecha:** 29 de octubre 2025, 12:15 PM  
**Estado:** âœ… IMPLEMENTADO en ProfileScreenV2.tsx  
**UbicaciÃ³n:** DespuÃ©s de cards de Amigos, antes de Favoritos
